\usepackage{enumitem, amsthm}
\usepackage[open]{bookmark}

\makeatletter

% problemas com o ambiente 'proof' do thmbox
\LetLtxMacro\ams@proof\proof
\LetLtxMacro\ams@end@proof\endproof

\usepackage{thmtools}

\AtBeginDocument{%
    \LetLtxMacro\proof\ams@proof
    \LetLtxMacro\endproof\ams@end@proof
}

% Marcador lateral para teoremas
\newcommand*{\theorembookmark}{%
    \bookmark[
        dest = \@currentHref,
        rellevel = 1,
        keeplevel,
    ]{%
        \thmt@thmname\space\csname the\thmt@envname\endcsname
    }%
}


%% Ajusta espaços para o Display Mode %%
\newcommand{\reducemathskip}[1][0.5em]{%
    \setlength{\abovedisplayskip}{1pt}%
    \setlength{\belowdisplayskip}{#1}%
    \setlength{\abovedisplayshortskip}{#1}%
    \setlength{\belowdisplayshortskip}{#1}%
}

%% Ambiente para Teoremas %%
\declaretheoremstyle[
    thmbox = M,
    %
    numberlike = theorem,
    postheadhook = \theorembookmark
]{teorema}

\declaretheorem{theorem}[
    name = Teorema,
    refname = {teorema,teoremas},
    Refname= {Teorema,Teoremas},
    %
    style = teorema,
    numberwithin = section
]
\declaretheorem{lemma}[
    name = Lema,
    refname = {lema,lemas},
    Refname= {Lema,Lemas},
    %
    style = teorema
]
\declaretheorem{proposition}[
    name = Proposição,
    refname = {proposição,proposições},
    Refname= {Proposição,Proposições},
    %
    style = teorema
]

%% Ambiente para Definições %%
\declaretheorem{definition}[
    name = Definição,
    refname = {definição,definições},
    Refname= {Definição,Definições},
    %
    style = definition,
    numberlike = theorem,
    postheadhook = \theorembookmark
]

%% Lista de Casos %%
\newlist{casos}{enumerate}{2}
\setlist[casos]{
    wide,
    labelwidth    = {\parindent},
    listparindent = {\parindent},
    parsep        = {\parskip},
    topsep        = {0pt},
    label         = {\textbf{Caso \arabic*}:}
}
% \setlist[casos,2]{label=\textbf{Caso \arabic{casosi}\alph*}:}

%% Casos Nomeados: \item[Caso Base:] %%
\newlist{ncasos}{description}{2}
\setlist[ncasos]{
    wide,
    listparindent = {\parindent},
    parsep        = {\parskip},
    topsep        = {0pt}
}

\makeatother
